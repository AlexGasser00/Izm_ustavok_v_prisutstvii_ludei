---
{}
---

### Входные переменные

people_presence – наличие людей в помещении (1 = есть люди, 0 = никого нет). Tset_people – стандартная уставка температуры при присутствии людей (°C). Tset_off – уставка температуры при отсутствии людей (°C). Tset_manual – ручная уставка температуры, установленная резидентами (°C). Override_flag – флаг ручного изменения уставки (0/1). override_timer – таймер действия ручной уставки (по умолчанию 60 минут).

### Выходные переменные

Tset_current – активная уставка температуры (°C). Override_flag – флаг ручного изменения уставки (0/1).

### Логика работы

Проверяем people_presence (есть ли люди в помещении).

Если есть люди (people_presence = 1): Если задана Tset_manual -> Tset_current = Tset_manual, Override_flag = 1, сбрасываемтаймер override_timer. Иначе -> Tset_current = Tset_people, Override_flag = 0.

Если людей нет (people_presence = 0): Если задана Tset_manual -> Tset_current = Tset_manual, Override_flag = 1, запускаем таймер override_timer = 60 мин. Иначе -> Tset_current = Tset_off, Override_flag = 0.

Поведение таймера:

Если таймер override_timer активен (т.е. люди покинули помещение, но 60 минут ещё не прошло) -> поддерживаем Tset_manual. Если за время таймера кто-то вернулся (people_presence = 1) -> оставляем Tset_manual и сбрасываем таймер. По и

### Блок-схема

```
<mxGraphModel><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="2" value="Начало" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="300" y="30" width="120" height="60" as="geometry"/></mxCell><mxCell id="3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="5" target="29" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="4" value="НЕТ" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="3"><mxGeometry x="-0.2375" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="5" value="people_presence = 1 ?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="260" y="130" width="200" height="80" as="geometry"/></mxCell><mxCell id="6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="7" target="16" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="140" y="760"/><mxPoint x="360" y="760"/></Array></mxGeometry></mxCell><mxCell id="7" value="Tset_current = Tset_people&#10;Override_flag = 0&#10;override_timer = 0" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="40" y="360" width="200" height="80" as="geometry"/></mxCell><mxCell id="8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="9" target="16" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="9" value="Tset_current = Tset_manual&lt;br&gt;Override_flag = 1&lt;br&gt;сбрасываем override_timer" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="260" y="360" width="200" height="80" as="geometry"/></mxCell><mxCell id="10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="11" target="16" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="580" y="760"/><mxPoint x="360" y="760"/></Array></mxGeometry></mxCell><mxCell id="11" value="Tset_current = Tset_off&#10;Override_flag = 0" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="480" y="360" width="200" height="80" as="geometry"/></mxCell><mxCell id="12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" source="13" target="15" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="13" value="Tset_current = Tset_manual&#10;Override_flag = 1&#10;override_timer = 60 мин" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="700" y="360" width="200" height="80" as="geometry"/></mxCell><mxCell id="14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="15" target="16" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="800" y="760"/><mxPoint x="360" y="760"/></Array></mxGeometry></mxCell><mxCell id="15" value="По истечению таймера&lt;br&gt;Tset_current = Tset_off&lt;br&gt;Override_flag = 0" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="700" y="500" width="200" height="80" as="geometry"/></mxCell><mxCell id="16" value="Конец" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="300" y="830" width="120" height="60" as="geometry"/></mxCell><mxCell id="17" edge="1" source="2" target="5" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="24" target="7" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="19" value="НЕТ" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="18"><mxGeometry x="-0.1854" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="5" target="24" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="260" y="170" as="sourcePoint"/><mxPoint x="140" y="330" as="targetPoint"/></mxGeometry></mxCell><mxCell id="21" value="ДА" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="20"><mxGeometry x="-0.3847" y="1" relative="1" as="geometry"><mxPoint x="16" y="-1" as="offset"/></mxGeometry></mxCell><mxCell id="22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" source="24" target="9" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="23" value="ДА" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="22"><mxGeometry x="0.4116" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="24" value="Tset_manual задана?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="40" y="220" width="200" height="80" as="geometry"/></mxCell><mxCell id="25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" source="29" target="11" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="26" value="НЕТ" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="25"><mxGeometry x="-0.1407" y="3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" source="29" target="13" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="28" value="ДА" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="27"><mxGeometry x="0.2676" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="29" value="Tset_manual задана?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="480" y="210" width="200" height="80" as="geometry"/></mxCell></root></mxGraphModel>
```


